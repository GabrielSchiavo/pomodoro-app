import 'package:flutter/material.dart';
import 'package:flutter_mobx/flutter_mobx.dart';
import 'package:pomodoro/components/cronometro_botao.dart';
import 'package:pomodoro/store/pomodoro.store.dart';
import 'package:provider/provider.dart';

class Cronometro extends StatelessWidget {
  const Cronometro({super.key});

  @override
  Widget build(BuildContext context) {
    final store = Provider.of<PomodoroStore>(context);

    return Container(
      color: store.estaTrabalhando() ? Theme.of(context).colorScheme.tertiary : Theme.of(context).colorScheme.primary,
      child: Column(
        mainAxisAlignment: MainAxisAlignment.center,
        children: [
          Text(
            store.estaTrabalhando() ? 'Hora de Trabalhar' : 'Hora de Descansar',
            style: TextStyle(
              fontSize: 30,
              color: Theme.of(context).colorScheme.background,
            ),
          ),
          const SizedBox(height: 15),
          Text(
            '${store.minutos.toString().padLeft(2, '0')}:${store.segundos.toString().padLeft(2, '0')}',
            style: TextStyle(
              fontSize: 100,
              color: Theme.of(context).colorScheme.background,
            ),
          ),
          const SizedBox(height: 15),
          Observer(
            builder: ((_) => Row(
                  mainAxisAlignment: MainAxisAlignment.center,
                  children: [
                    if (!store.iniciado)
                      Padding(
                        padding: const EdgeInsets.only(right: 10),
                        child: CronometroBotao(
                          texto: 'Iniciar',
                          icone: Icons.play_arrow_rounded,
                          onPress: store.iniciar,
                        ),
                      ),
                    if (store.iniciado)
                      Padding(
                        padding: const EdgeInsets.only(right: 10),
                        child: CronometroBotao(
                          texto: 'Parar',
                          icone: Icons.stop_rounded,
                          onPress: store.parar,
                        ),
                      ),
                    Padding(
                      padding: const EdgeInsets.only(left: 10),
                      child: CronometroBotao(
                        texto: 'Reiniciar',
                        icone: Icons.refresh_rounded,
                        onPress: store.reiniciar,
                      ),
                    ),
                  ],
                )),
          ),
        ],
      ),
    );
  }
}
